<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Cam-to-Cam Live - HotMeet</title>
    <link rel="stylesheet" href="/css/style.css?v=3" />
    <link rel="stylesheet" href="/css/animations.css" />
    <link rel="stylesheet" href="/css/cam-interface.css" />
  </head>
  <body>
    <header class="header">
      <nav class="nav">
        <a href="/" class="nav-brand">
          <img
            src="/images/logo-hotmeet.png"
            alt="HotMeet - Rencontres Adultes Premium"
            class="logo-img"
          />
          <span class="logo-text">HotMeet</span>
        </a>
        <div class="nav-menu">
          <a href="/" class="nav-link">Accueil</a>
          <a href="/directory" class="nav-link">Annuaire</a>
          <a href="/ads" class="nav-link">Annonces</a>
          <a href="/tonight" class="nav-link">Ce Soir</a>
          <a href="/cam" class="nav-link active">Cam-to-Cam</a>
          <a href="/messages" class="nav-link"
            >Messages
            <span
              class="notification-badge"
              id="messageBadge"
              style="display: none"
              >0</span
            ></a
          >
          <a href="/profile" class="nav-link">Mon Profil</a>
        </div>
      </nav>
    </header>

    <main class="cam-container">
      <div class="container">
        <div class="page-header">
          <h1>Cam-to-Cam Live</h1>
          <p>
            ExpÃ©riences en direct avec technologie WebRTC sÃ©curisÃ©e -
            FonctionnalitÃ© rÃ©servÃ©e aux membres premium
          </p>
        </div>

        <!-- Section d'explication de la fonctionnalitÃ© -->
        <div
          style="
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: var(--radius);
            margin-bottom: 2rem;
          "
        >
          <h2 style="color: #2c3e50; margin-bottom: 1rem">
            ExpÃ©riences en Direct
          </h2>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
              gap: 1.5rem;
            "
          >
            <div style="text-align: center">
              <div style="font-size: 2rem; margin-bottom: 1rem">ğŸ“¹</div>
              <h3 style="color: #2c3e50; margin-bottom: 0.5rem">VidÃ©o Live</h3>
              <p style="color: #666">
                Communications en temps rÃ©el avec webcam
              </p>
            </div>
            <div style="text-align: center">
              <div style="font-size: 2rem; margin-bottom: 1rem">ğŸ”’</div>
              <h3 style="color: #2c3e50; margin-bottom: 0.5rem">SÃ©curitÃ©</h3>
              <p style="color: #666">Technologie WebRTC cryptÃ©e et sÃ©curisÃ©e</p>
            </div>
            <div style="text-align: center">
              <div style="font-size: 2rem; margin-bottom: 1rem">ğŸŒ</div>
              <h3 style="color: #2c3e50; margin-bottom: 0.5rem">Global</h3>
              <p style="color: #666">
                Connectez-vous avec des personnes du monde entier
              </p>
            </div>
          </div>
        </div>

        <!-- Restriction pour les non-premium -->
        <div id="premiumRestriction" class="premium-restriction hidden">
          <h2 style="color: #2c3e50; margin-bottom: 1rem">
            FonctionnalitÃ© Premium
          </h2>
          <p style="color: #666; margin-bottom: 2rem">
            L'accÃ¨s au cam-to-cam est rÃ©servÃ© aux membres premium.
          </p>
          <button class="btn-primary" onclick="window.location.href='/premium'">
            Devenir Premium
          </button>
        </div>

        <!-- Demande d'autorisations -->
        <div id="permissionRequest" class="permission-request hidden">
          <h2 style="color: #2c3e50; margin-bottom: 1rem">
            Autorisations requises
          </h2>
          <p style="color: #666; margin-bottom: 1rem">
            Le cam-to-cam nÃ©cessite l'accÃ¨s Ã  votre webcam et microphone.
          </p>
          <button
            class="btn-primary"
            id="requestPermissions"
            style="min-height: 44px; font-size: 16px"
          >
            Autoriser l'accÃ¨s
          </button>
        </div>

        <!-- Configuration du profil -->
        <div id="profileSetup" class="profile-setup hidden">
          <h2 style="color: #2c3e50; margin-bottom: 1rem">
            Configuration de votre profil
          </h2>
          <p style="color: #666; margin-bottom: 1rem">
            ComplÃ©tez votre profil pour commencer le cam-to-cam
          </p>

          <div class="profile-config">
            <div class="form-group" style="margin-bottom: 1rem">
              <label for="userGender">Votre genre *</label>
              <select id="userGender" required>
                <option value="">Choisissez votre genre...</option>
                <option value="male">ğŸ‘¨ Homme</option>
                <option value="female">ğŸ‘© Femme</option>
                <option value="other">ğŸŒˆ Autre</option>
              </select>
              <small style="color: #666"
                >Cette information est obligatoire pour le matching</small
              >
            </div>

            <div class="form-group" style="margin-bottom: 1rem">
              <label for="detectedCountry">Votre localisation</label>
              <div
                id="countryDisplay"
                style="
                  padding: 0.75rem;
                  background: #f8f9fa;
                  border-radius: 4px;
                  border: 1px solid #ddd;
                "
              >
                <span id="countryFlag">ğŸŒ</span>
                <span id="countryName">DÃ©tection en cours...</span>
              </div>
              <small style="color: #666"
                >DÃ©tectÃ©e automatiquement via votre adresse IP</small
              >
            </div>
          </div>

          <button
            class="btn-primary"
            id="validateProfile"
            style="min-height: 44px; font-size: 16px"
            disabled
          >
            Continuer vers la recherche
          </button>
        </div>

        <!-- Recherche de partenaire -->
        <div id="searchSection" class="search-partner hidden">
          <h2 style="color: #2c3e50; margin-bottom: 1rem">
            Rechercher un partenaire
          </h2>

          <!-- Configuration anonymat -->
          <div class="filter-group" style="margin-bottom: 1rem">
            <label for="anonymity">Mode anonyme</label>
            <select id="anonymity">
              <option value="normal">Visage visible</option>
              <option value="mask">Masque de protection</option>
              <option value="blur">Flou du visage</option>
              <option value="silhouette">Silhouette uniquement</option>
            </select>
          </div>

          <button
            class="btn-primary"
            id="startSearch"
            style="min-height: 44px; font-size: 16px"
          >
            Commencer la recherche
          </button>
        </div>

        <!-- Interface cam-to-cam principale -->
        <div id="camInterface" class="hidden">
          <div class="cam-content">
            <div class="video-section">
              <div class="video-container">
                <div class="video-wrapper">
                  <video id="localVideo" autoplay muted></video>
                  <div class="video-label">Vous</div>
                </div>
                <div class="video-wrapper">
                  <video id="remoteVideo" autoplay></video>
                  <div class="video-label">Partenaire</div>
                </div>
              </div>

              <div class="controls">
                <button class="control-btn" id="pauseBtn">
                  <span>â¸ï¸ Pause</span>
                </button>
                <button class="control-btn" id="nextBtn">
                  <span>â­ï¸ Suivant</span>
                </button>
                <button class="control-btn danger" id="reportBtn">
                  <span>ğŸš¨ Signaler</span>
                </button>
                <button class="control-btn danger" id="endBtn">
                  <span>âŒ Terminer</span>
                </button>
              </div>
            </div>

            <div class="chat-section">
              <div class="chat-header">
                <h3>Chat en direct</h3>
                <div
                  class="chat-settings"
                  style="
                    display: flex;
                    gap: 0.5rem;
                    margin-top: 0.5rem;
                    flex-wrap: wrap;
                  "
                >
                  <div
                    class="user-info"
                    style="
                      display: flex;
                      align-items: center;
                      gap: 0.5rem;
                      padding: 0.25rem 0.5rem;
                      background: rgba(255, 255, 255, 0.1);
                      border-radius: 4px;
                    "
                  >
                    <span id="userCountryFlag">ğŸŒ</span>
                    <span id="userGenderIcon">ğŸ‘¤</span>
                    <small style="color: #ccc">Vous</small>
                  </div>
                  <select
                    id="chatGender"
                    class="chat-setting"
                    style="
                      padding: 0.25rem;
                      border-radius: 4px;
                      border: 1px solid rgba(255, 255, 255, 0.3);
                      background: rgba(255, 255, 255, 0.2);
                      color: white;
                    "
                  >
                    <option value="all">ğŸ‘¥ Chercher: Tous</option>
                    <option value="male">ğŸ‘¨ Chercher: Homme</option>
                    <option value="female">ğŸ‘© Chercher: Femme</option>
                    <option value="other">ğŸŒˆ Chercher: Autre</option>
                  </select>
                  <select
                    id="chatLanguage"
                    class="chat-setting"
                    style="
                      padding: 0.25rem;
                      border-radius: 4px;
                      border: 1px solid rgba(255, 255, 255, 0.3);
                      background: rgba(255, 255, 255, 0.2);
                      color: white;
                    "
                  >
                    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                    <option value="en">ğŸ‡ºğŸ‡¸ Anglais</option>
                    <option value="de">ğŸ‡©ğŸ‡ª Allemand</option>
                    <option value="it">ğŸ‡®ğŸ‡¹ Italien</option>
                    <option value="es">ğŸ‡ªğŸ‡¸ Espagnol</option>
                    <option value="pt">ğŸ‡µğŸ‡¹ Portugais</option>
                    <option value="nl">ğŸ‡³ğŸ‡± NÃ©erlandais</option>
                    <option value="ru">ğŸ‡·ğŸ‡º Russe</option>
                    <option value="ja">ğŸ‡¯ğŸ‡µ Japonais</option>
                    <option value="ko">ğŸ‡°ğŸ‡· CorÃ©en</option>
                    <option value="zh">ğŸ‡¨ğŸ‡³ Chinois</option>
                    <option value="ar">ğŸ‡¸ğŸ‡¦ Arabe</option>
                    <option value="hi">ğŸ‡®ğŸ‡³ Hindi</option>
                    <option value="tr">ğŸ‡¹ğŸ‡· Turc</option>
                    <option value="pl">ğŸ‡µğŸ‡± Polonais</option>
                    <option value="sv">ğŸ‡¸ğŸ‡ª SuÃ©dois</option>
                    <option value="da">ğŸ‡©ğŸ‡° Danois</option>
                    <option value="no">ğŸ‡³ğŸ‡´ NorvÃ©gien</option>
                    <option value="fi">ğŸ‡«ğŸ‡® Finnois</option>
                    <option value="el">ğŸ‡¬ğŸ‡· Grec</option>
                    <option value="he">ğŸ‡®ğŸ‡± HÃ©breu</option>
                    <option value="th">ğŸ‡¹ğŸ‡­ ThaÃ¯</option>
                    <option value="vi">ğŸ‡»ğŸ‡³ Vietnamien</option>
                    <option value="cs">ğŸ‡¨ğŸ‡¿ TchÃ¨que</option>
                    <option value="hu">ğŸ‡­ğŸ‡º Hongrois</option>
                    <option value="ro">ğŸ‡·ğŸ‡´ Roumain</option>
                    <option value="bg">ğŸ‡§ğŸ‡¬ Bulgare</option>
                    <option value="hr">ğŸ‡­ğŸ‡· Croate</option>
                    <option value="sk">ğŸ‡¸ğŸ‡° Slovaque</option>
                    <option value="sl">ğŸ‡¸ğŸ‡® SlovÃ¨ne</option>
                    <option value="et">ğŸ‡ªğŸ‡ª Estonien</option>
                    <option value="lv">ğŸ‡±ğŸ‡» Letton</option>
                    <option value="lt">ğŸ‡±ğŸ‡¹ Lituanien</option>
                  </select>
                  <select
                    id="chatAnonymity"
                    class="chat-setting"
                    style="
                      padding: 0.25rem;
                      border-radius: 4px;
                      border: 1px solid rgba(255, 255, 255, 0.3);
                      background: rgba(255, 255, 255, 0.2);
                      color: white;
                    "
                  >
                    <option value="normal">ğŸ‘¤ Normal</option>
                    <option value="mask">ğŸ­ Masque</option>
                    <option value="blur">ğŸŒ€ Flou</option>
                    <option value="silhouette">ğŸ‘¥ Silhouette</option>
                  </select>
                </div>
              </div>
              <div class="chat-messages" id="chatMessages">
                <div class="message system">
                  Conversation commencÃ©e. Vous pouvez maintenant chatter avec
                  votre partenaire.
                </div>
              </div>
              <div class="chat-input">
                <input
                  type="text"
                  id="chatInput"
                  placeholder="Tapez votre message..."
                />
                <button
                  class="btn-primary"
                  id="sendBtn"
                  style="min-height: 44px; font-size: 16px"
                >
                  Envoyer
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Statut de recherche (masquÃ© mais nÃ©cessaire pour le JavaScript) -->
      <div id="searchStatus" class="hidden" style="display: none !important">
        <h3>Recherche de partenaire en cours...</h3>
        <p>
          Veuillez patienter pendant que nous trouvons un partenaire
          correspondant Ã  vos critÃ¨res.
        </p>
        <div class="loading">â³</div>
        <button id="cancelSearch">Annuler la recherche</button>
      </div>
    </main>

    <!-- Modal de signalement -->
    <div
      id="reportModal"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 10000;
      "
    >
      <div
        style="
          background: white;
          padding: 2rem;
          border-radius: var(--radius);
          max-width: 500px;
          width: 90%;
        "
      >
        <h3 style="color: #2c3e50; margin-bottom: 1rem">
          Signaler un comportement
        </h3>
        <div style="margin-bottom: 1rem">
          <label
            style="
              display: block;
              margin-bottom: 0.5rem;
              color: #2c3e50;
              font-weight: 600;
            "
            >Raison du signalement</label
          >
          <select
            id="reportReason"
            style="
              width: 100%;
              padding: 0.75rem;
              border: 2px solid var(--border-color);
              border-radius: var(--radius);
            "
          >
            <option value="mineur">Contenu mineur suspectÃ©</option>
            <option value="comportement">Comportement inappropriÃ©</option>
            <option value="harcelement">HarcÃ¨lement</option>
            <option value="autre">Autre</option>
          </select>
        </div>
        <div style="margin-bottom: 1rem">
          <label
            style="
              display: block;
              margin-bottom: 0.5rem;
              color: #2c3e50;
              font-weight: 600;
            "
            >Description</label
          >
          <textarea
            id="reportDescription"
            style="
              width: 100%;
              padding: 0.75rem;
              border: 2px solid var(--border-color);
              border-radius: var(--radius);
              height: 100px;
            "
            placeholder="DÃ©crivez le problÃ¨me..."
          ></textarea>
        </div>
        <div style="display: flex; gap: 1rem; justify-content: flex-end">
          <button class="btn-secondary" id="cancelReport">Annuler</button>
          <button class="btn-primary" id="submitReport">Signaler</button>
        </div>
      </div>
    </div>

    <footer class="footer">
      <div class="container">
        <div class="footer-bottom">
          <p>
            &copy; 2024 HotMeet. Tous droits rÃ©servÃ©s. RÃ©servÃ© aux adultes de 18
            ans et plus.
          </p>
        </div>
      </div>
    </footer>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/cam.js"></script>

    <!-- Script de notifications globales -->
    <script src="/js/global-notifications.js"></script>
  </body>
</html>
