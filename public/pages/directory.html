<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Annuaire - HotMeet</title>
    <link rel="stylesheet" href="/css/style.css?v=6" />
    <link rel="stylesheet" href="/css/pages.css?v=1" />
    <link rel="stylesheet" href="/css/animations.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <nav class="nav">
        <a href="/" class="nav-brand">
          <img
            src="/images/logo-hotmeet.png"
            alt="HotMeet - Rencontres Adultes Premium"
            class="logo-img"
          />
          <span class="logo-text">HotMeet</span>
        </a>

        <div class="nav-menu" id="navMenu">
          <a href="/" class="nav-link">Accueil</a>
          <a href="/directory" class="nav-link active">Annuaire</a>
          <a href="/ads" class="nav-link">Annonces</a>
          <a href="/tonight" class="nav-link">Ce Soir</a>
          <a href="/cam" class="nav-link">Cam-to-Cam</a>
          <a href="/messages" class="nav-link">Messages</a>
          <a href="/profile" class="nav-link">Mon Profil</a>
        </div>

        <div class="nav-actions">
          <button class="btn-secondary" id="loginBtn">Connexion</button>
          <button class="btn-primary" id="registerBtn">Inscription</button>
          <div class="mobile-menu-toggle" id="mobileMenuToggle">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </nav>
    </header>

    <!-- Main Content -->
    <main class="pages-container">
      <div class="container">
        <!-- Hero Section -->
        <section class="hero" style="min-height: 40vh; padding-top: 100px">
          <div class="hero-content">
            <div class="hero-text">
              <h1 class="hero-title">Annuaire des membres</h1>
              <h2 class="hero-subtitle">
                D√©couvrez les profils de notre communaut√©
              </h2>
              <p class="hero-description">
                Parcourez les profils authentiques de nos membres et trouvez des
                personnes partageant vos int√©r√™ts
              </p>
            </div>
          </div>
        </section>

        <!-- Filtres de recherche am√©lior√©s -->
        <section class="filters-section">
          <div class="filters-card">
            <div class="filters-header">
              <h3>üîç Recherche avanc√©e</h3>
              <p class="filters-description">
                Affinez votre recherche avec des crit√®res pr√©cis
              </p>
            </div>
            <form id="filtersForm" class="filters-form">
              <div class="filter-group">
                <label for="ageMin">√Çge minimum</label>
                <input
                  type="number"
                  id="ageMin"
                  name="ageMin"
                  min="18"
                  max="100"
                  placeholder="18"
                />
              </div>
              <div class="filter-group">
                <label for="ageMax">√Çge maximum</label>
                <input
                  type="number"
                  id="ageMax"
                  name="ageMax"
                  min="18"
                  max="100"
                  placeholder="100"
                />
              </div>
              <div class="filter-group">
                <label for="sexe">Genre</label>
                <select id="sexe" name="sexe">
                  <option value="">Tous</option>
                  <option value="homme">Homme</option>
                  <option value="femme">Femme</option>
                  <option value="autre">Autre</option>
                </select>
              </div>
              <div class="filter-group">
                <label for="filtrePays">Pays</label>
                <select id="filtrePays" name="filtrePays">
                  <option value="">Tous les pays</option>
                  <option value="france">France</option>
                  <option value="suisse">Suisse</option>
                  <option value="belgique">Belgique</option>
                  <option value="allemagne">Allemagne</option>
                  <option value="italie">Italie</option>
                  <option value="espagne">Espagne</option>
                  <option value="portugal">Portugal</option>
                  <option value="pays-bas">Pays-Bas</option>
                  <option value="luxembourg">Luxembourg</option>
                  <option value="autriche">Autriche</option>
                  <option value="royaume-uni">Royaume-Uni</option>
                  <option value="irlande">Irlande</option>
                  <option value="danemark">Danemark</option>
                  <option value="suede">Su√®de</option>
                  <option value="norvege">Norv√®ge</option>
                  <option value="finlande">Finlande</option>
                  <option value="pologne">Pologne</option>
                  <option value="republique-tcheque">R√©publique Tch√®que</option>
                  <option value="slovaquie">Slovaquie</option>
                  <option value="hongrie">Hongrie</option>
                  <option value="roumanie">Roumanie</option>
                  <option value="bulgarie">Bulgarie</option>
                  <option value="grece">Gr√®ce</option>
                  <option value="croatie">Croatie</option>
                  <option value="slovenie">Slov√©nie</option>
                  <option value="estonie">Estonie</option>
                  <option value="lettonie">Lettonie</option>
                  <option value="lituanie">Lituanie</option>
                  <option value="malte">Malte</option>
                  <option value="chypre">Chypre</option>
                </select>
              </div>

              <div class="filter-group">
                <label for="filtreRegion">R√©gion</label>
                <select id="filtreRegion" name="filtreRegion">
                  <option value="">Toutes les r√©gions</option>
                  <!-- Les r√©gions seront charg√©es dynamiquement selon le pays -->
                </select>
              </div>

              <div class="filter-group">
                <label for="filtreVille">Ville</label>
                <select id="filtreVille" name="filtreVille">
                  <option value="">Toutes les villes</option>
                  <!-- Les villes seront charg√©es dynamiquement -->
                </select>
              </div>
              <div class="filter-actions">
                <button type="submit" class="btn-primary search-btn">
                  üîç Lancer la recherche
                </button>
                <button type="button" id="resetFilters" class="btn-secondary">
                  üóëÔ∏è R√©initialiser
                </button>
              </div>
            </form>
          </div>
        </section>

        <!-- R√©sultats avec interface am√©lior√©e -->
        <section class="results-section">
          <div class="results-header">
            <div class="results-info">
              <h3 id="resultsCount">üîé Chargement des profils...</h3>
              <p class="results-description" id="resultsDescription"></p>
            </div>
            <div class="sort-options">
              <label for="sortBy">üìä Trier par:</label>
              <select id="sortBy">
                <option value="lastActive">üïí Derni√®re activit√©</option>
                <option value="age">üë§ √Çge</option>
                <option value="name">üî§ Nom</option>
                <option value="distance">üìç Proximit√©</option>
              </select>
            </div>
          </div>

          <div class="profiles-grid" id="profilesGrid">
            <!-- Les profils seront charg√©s ici dynamiquement -->
          </div>

          <div class="pagination" id="pagination">
            <!-- La pagination sera g√©n√©r√©e ici -->
          </div>
        </section>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h4>HotMeet</h4>
            <p>
              La plateforme premium de rencontres adultes pour des exp√©riences
              authentiques et s√©curis√©es.
            </p>
          </div>
          <div class="footer-section">
            <h4>Navigation</h4>
            <ul class="footer-links">
              <li><a href="/">Accueil</a></li>
              <li><a href="/directory">Annuaire</a></li>
              <li><a href="/ads">Annonces</a></li>
              <li><a href="/tonight">Ce Soir</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>L√©gal</h4>
            <ul class="footer-links">
              <li><a href="/legal">Mentions l√©gales</a></li>
              <li><a href="/legal#privacy">Politique de confidentialit√©</a></li>
              <li><a href="/legal#terms">Conditions d'utilisation</a></li>
              <li><a href="/legal#cookies">Cookies</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>Contact</h4>
            <ul class="footer-links">
              <li><a href="mailto:support@hotmeet.ch">Support</a></li>
              <li><a href="/help">Aide</a></li>
              <li><a href="/about">√Ä propos</a></li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <p>
            &copy; 2024 HotMeet. Tous droits r√©serv√©s. R√©serv√© aux adultes de 18
            ans et plus.
          </p>
          <p><strong>V√©rification d'√¢ge requise</strong></p>
        </div>
      </div>
    </footer>

    <!-- Script de d√©bogage pour v√©rifier le chargement des donn√©es -->
    <script>
      console.log('=== D√âBOGAGE ANNUAIRE - CHARGEMENT DES DONN√âES ===');
      console.log(
        'Donn√©es r√©gions charg√©es:',
        window.europeanRegions ? 'OUI' : 'NON'
      );
      console.log(
        'Donn√©es villes charg√©es:',
        window.europeanCities ? 'OUI' : 'NON'
      );
      if (window.europeanRegions) {
        console.log('Pays disponibles:', Object.keys(window.europeanRegions));
        console.log(
          'R√©gions pour France:',
          window.europeanRegions.france?.length || 0
        );
        console.log(
          'R√©gions pour Suisse:',
          window.europeanRegions.suisse?.length || 0
        );
        console.log(
          'R√©gions pour Belgique:',
          window.europeanRegions.belgique?.length || 0
        );
      }
      if (window.europeanCities) {
        console.log(
          'Villes pour France:',
          window.europeanCities.france?.length || 0
        );
        console.log(
          'Villes pour Suisse:',
          window.europeanCities.suisse?.length || 0
        );
        console.log(
          'Villes pour Belgique:',
          window.europeanCities.belgique?.length || 0
        );
      }
    </script>

    <!-- JavaScript principal -->
    <script src="/js/regions-europe.js"></script>
    <script src="/js/cities-europe.js"></script>
    <script src="/js/app.js"></script>

    <!-- JavaScript pour l'annuaire -->
    <script>
      class DirectoryPage {
        constructor() {
          this.currentPage = 1;
          this.limit = 12;
          this.filters = {};
          this.sortBy = 'lastActive';
          this.init();
        }

        init() {
          this.setupEventListeners();
          this.setupLocationFilters();
          this.loadUsers();
        }

        setupEventListeners() {
          // Formulaire de filtres
          document
            .getElementById('filtersForm')
            .addEventListener('submit', e => {
              e.preventDefault();
              this.applyFilters();
            });

          // R√©initialisation des filtres
          document
            .getElementById('resetFilters')
            .addEventListener('click', () => {
              this.resetFilters();
            });

          // Tri
          document.getElementById('sortBy').addEventListener('change', e => {
            this.sortBy = e.target.value;
            this.loadUsers();
          });

          // Liaison pays-r√©gion (EXACTEMENT comme sur la page profil)
          document
            .getElementById('filtrePays')
            .addEventListener('change', e => {
              console.log('Changement de pays:', e.target.value);
              this.updateRegions(e.target.value);
            });

          // Liaison r√©gion-villes (EXACTEMENT comme sur la page profil)
          document
            .getElementById('filtreRegion')
            .addEventListener('change', e => {
              console.log('Changement de r√©gion:', e.target.value);
              this.updateCities(
                document.getElementById('filtrePays').value,
                e.target.value
              );
            });
        }

        setupLocationFilters() {
          // Initialiser les r√©gions si un pays est d√©j√† s√©lectionn√© (EXACTEMENT comme sur la page profil)
          const paysSelect = document.getElementById('filtrePays');
          const regionSelect = document.getElementById('filtreRegion');
          const villeSelect = document.getElementById('filtreVille');

          if (paysSelect.value) {
            this.updateRegions(paysSelect.value);

            // Restaurer les valeurs sauvegard√©es (EXACTEMENT comme sur la page profil)
            setTimeout(() => {
              const savedRegion = regionSelect.value;
              if (savedRegion) {
                regionSelect.value = savedRegion;
                this.updateCities(paysSelect.value, savedRegion);
              }

              const savedVille = villeSelect.value;
              if (savedVille) {
                setTimeout(() => {
                  villeSelect.value = savedVille;
                }, 200);
              }
            }, 200);
          } else {
            // Si aucun pays n'est s√©lectionn√©, vider les listes
            regionSelect.innerHTML =
              '<option value="">Toutes les r√©gions</option>';
            villeSelect.innerHTML =
              '<option value="">Toutes les villes</option>';
          }
        }

        updateCities(pays, regionValue) {
          const villeSelect = document.getElementById('filtreVille');

          console.log(
            'updateCities appel√© avec pays:',
            pays,
            'r√©gion:',
            regionValue
          );

          // Vider la liste des villes (EXACTEMENT comme sur la page profil)
          villeSelect.innerHTML = '<option value="">Toutes les villes</option>';

          if (!pays) {
            console.log('Aucun pays s√©lectionn√© pour charger les villes');
            return;
          }

          // V√©rifier que les donn√©es sont disponibles
          if (!window.europeanCities) {
            console.error('ERREUR: Donn√©es villes non charg√©es');
            return;
          }

          // Charger les villes principales du pays (EXACTEMENT comme sur la page profil)
          const cities = window.europeanCities[pays];
          console.log(`Villes trouv√©es pour ${pays}:`, cities);

          if (!cities || cities.length === 0) {
            console.warn(`Aucune ville trouv√©e pour le pays: ${pays}`);
            return;
          }

          cities.forEach(city => {
            const option = document.createElement('option');
            option.value = city.value;
            option.textContent = city.name;
            villeSelect.appendChild(option);
          });

          console.log(
            `‚úÖ Villes charg√©es pour ${pays}: ${cities.length} villes disponibles`
          );
        }

        updateRegions(pays) {
          const regionSelect = document.getElementById('filtreRegion');
          const villeSelect = document.getElementById('filtreVille');

          console.log('updateRegions appel√© avec pays:', pays);

          // Vider les listes (EXACTEMENT comme sur la page profil)
          regionSelect.innerHTML =
            '<option value="">Toutes les r√©gions</option>';
          villeSelect.innerHTML = '<option value="">Toutes les villes</option>';

          if (!pays) {
            console.log('Aucun pays s√©lectionn√©, retour');
            return;
          }

          // V√©rifier que les donn√©es sont disponibles
          if (!window.europeanRegions) {
            console.error('ERREUR: Donn√©es r√©gions non charg√©es');
            return;
          }

          // Charger les r√©gions du pays s√©lectionn√© (EXACTEMENT comme sur la page profil)
          const regions = window.europeanRegions[pays];
          console.log(`R√©gions trouv√©es pour ${pays}:`, regions);

          if (!regions || regions.length === 0) {
            console.warn(`Aucune r√©gion trouv√©e pour le pays: ${pays}`);
            return;
          }

          regions.forEach(region => {
            const option = document.createElement('option');
            option.value = region.value;
            option.textContent = region.name;
            regionSelect.appendChild(option);
          });

          console.log(
            `‚úÖ R√©gions charg√©es pour ${pays}: ${regions.length} r√©gions disponibles`
          );

          // Charger aussi les villes pour ce pays
          this.updateCities(pays, '');
        }

        applyFilters() {
          const formData = new FormData(document.getElementById('filtersForm'));
          this.filters = {
            ageMin: formData.get('ageMin') || '',
            ageMax: formData.get('ageMax') || '',
            sexe: formData.get('sexe') || '',
            pays: formData.get('filtrePays') || '',
            region: formData.get('filtreRegion') || '',
            ville: formData.get('filtreVille') || '',
          };
          this.currentPage = 1;
          this.loadUsers();
        }

        resetFilters() {
          document.getElementById('filtersForm').reset();
          this.filters = {};
          this.currentPage = 1;
          this.loadUsers();
        }

        async loadUsers() {
          try {
            // Construire les param√®tres de requ√™te avec tous les filtres
            const params = new URLSearchParams();

            // Ajouter les filtres non vides
            Object.keys(this.filters).forEach(key => {
              if (this.filters[key]) {
                params.append(key, this.filters[key]);
              }
            });

            // Ajouter la pagination et le tri
            params.append('page', this.currentPage);
            params.append('limit', this.limit);
            params.append('sortBy', this.sortBy);

            const response = await fetch(`/api/users?${params}`);
            const result = await response.json();

            if (result.success) {
              this.displayUsers(result.users);
              this.updatePagination(result.pagination);
              this.updateResultsCount(result.pagination.total);
            } else {
              this.showError('Erreur lors du chargement des profils');
            }
          } catch (error) {
            console.error('Erreur:', error);
            this.showError('Erreur de connexion');
          }
        }

        displayUsers(users) {
          const grid = document.getElementById('profilesGrid');

          if (users.length === 0) {
            grid.innerHTML = `
              <div class="no-results">
                <h4>Aucun profil trouv√©</h4>
                <p>Essayez de modifier vos crit√®res de recherche</p>
              </div>
            `;
            return;
          }

          grid.innerHTML = users
            .map(
              user => `
            <div class="profile-card">
              <div class="profile-image">
                ${this.getProfileImage(user)}
                ${user.premium.isPremium ? '<span class="premium-badge">PREMIUM</span>' : ''}
                ${user.isOnline ? '<span class="online-indicator">üü¢ En ligne</span>' : ''}
              </div>
              <div class="profile-info">
                <h4>${user.profile.nom}</h4>
                <p class="profile-age">${user.profile.age} ans</p>
                <p class="profile-location">${user.profile.localisation}</p>
                <p class="profile-gender">${this.getGenderLabel(user.profile.sexe)}</p>
                <div class="profile-actions">
                  <button class="btn-primary" onclick="directoryPage.viewProfile('${user.id}')">
                    Voir le profil
                  </button>
                </div>
              </div>
            </div>
          `
            )
            .join('');
        }

        getProfileImage(user) {
          // V√©rifier si l'utilisateur a des photos
          if (user.profile.photos && user.profile.photos.length > 0) {
            // Trouver la photo de profil principale ou prendre la premi√®re
            const profilePhoto =
              user.profile.photos.find(photo => photo.isProfile) ||
              user.profile.photos[0];

            // Si la photo est flout√©e, afficher une version flout√©e
            if (profilePhoto.isBlurred) {
              return `
                <div class="blurred-photo-container">
                  <img src="${profilePhoto.path}" alt="${user.profile.nom}" class="blurred-photo">
                  <div class="unblur-overlay">
                    <button class="unblur-btn" onclick="directoryPage.requestUnblur('${user.id}', '${profilePhoto._id}')">
                      üëÅÔ∏è D√©voiler la photo
                    </button>
                  </div>
                </div>
              `;
            } else {
              return `<img src="${profilePhoto.path}" alt="${user.profile.nom}">`;
            }
          } else {
            // Photo par d√©faut si aucune photo n'est disponible
            return `<img src="/images/default-avatar.jpg" alt="${user.profile.nom}">`;
          }
        }

        getGenderLabel(gender) {
          const labels = {
            homme: 'Homme',
            femme: 'Femme',
            autre: 'Autre',
          };
          return labels[gender] || gender;
        }

        // Fonction pour demander le d√©voilement d'une photo
        async requestUnblur(userId, photoId) {
          try {
            const token = localStorage.getItem('hotmeet_token');
            const response = await fetch(
              `/api/uploads/photo/${photoId}/unblur-request`,
              {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                  ...(token && { Authorization: `Bearer ${token}` }),
                },
                body: JSON.stringify({ targetUserId: userId }),
              }
            );

            const result = await response.json();

            if (result.success) {
              this.showSuccess('Demande de d√©voilement envoy√©e');
              // Recharger les utilisateurs pour mettre √† jour l'affichage
              this.loadUsers();
            } else {
              this.showError(
                result.error.message || 'Erreur lors de la demande'
              );
            }
          } catch (error) {
            console.error('Erreur demande d√©voilement:', error);
            this.showError('Erreur lors de la demande de d√©voilement');
          }
        }

        updatePagination(pagination) {
          const paginationDiv = document.getElementById('pagination');
          const { page, pages, total } = pagination;

          if (pages <= 1) {
            paginationDiv.innerHTML = '';
            return;
          }

          let html = '<div class="pagination-controls">';

          // Bouton pr√©c√©dent
          if (page > 1) {
            html += `<button class="pagination-btn" onclick="directoryPage.goToPage(${page - 1})">‚Üê Pr√©c√©dent</button>`;
          }

          // Pages
          for (
            let i = Math.max(1, page - 2);
            i <= Math.min(pages, page + 2);
            i++
          ) {
            html += `<button class="pagination-btn ${i === page ? 'active' : ''}" onclick="directoryPage.goToPage(${i})">${i}</button>`;
          }

          // Bouton suivant
          if (page < pages) {
            html += `<button class="pagination-btn" onclick="directoryPage.goToPage(${page + 1})">Suivant ‚Üí</button>`;
          }

          html += '</div>';
          paginationDiv.innerHTML = html;
        }

        updateResultsCount(total) {
          const resultsCount = document.getElementById('resultsCount');
          const resultsDescription =
            document.getElementById('resultsDescription');

          resultsCount.textContent = `${total} profil${total > 1 ? 's' : ''} trouv√©${total > 1 ? 's' : ''}`;

          // Mettre √† jour la description avec les filtres actifs
          const activeFilters = [];
          if (this.filters.ageMin || this.filters.ageMax) {
            const ageRange = `${this.filters.ageMin || '18'}-${this.filters.ageMax || '100'}`;
            activeFilters.push(`√Çge: ${ageRange} ans`);
          }
          if (this.filters.sexe) {
            const genderLabels = {
              homme: 'Homme',
              femme: 'Femme',
              autre: 'Autre',
            };
            activeFilters.push(`Genre: ${genderLabels[this.filters.sexe]}`);
          }
          if (this.filters.pays) {
            activeFilters.push(`Pays: ${this.filters.pays}`);
          }
          if (this.filters.ville) {
            activeFilters.push(`Ville: ${this.filters.ville}`);
          }

          if (activeFilters.length > 0) {
            resultsDescription.textContent = `Filtres actifs: ${activeFilters.join(', ')}`;
          } else {
            resultsDescription.textContent =
              'Aucun filtre actif - affichage de tous les profils';
          }
        }

        goToPage(page) {
          this.currentPage = page;
          this.loadUsers();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        viewProfile(userId) {
          window.location.href = `/profile-view?id=${userId}`;
        }

        showError(message) {
          const errorDiv = document.createElement('div');
          errorDiv.className = 'error-message';
          errorDiv.textContent = message;
          errorDiv.style.cssText = `
            background: #f8d7da;
            color: #721c24;
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
            text-align: center;
          `;

          const resultsSection = document.querySelector('.results-section');
          resultsSection.insertBefore(errorDiv, resultsSection.firstChild);

          setTimeout(() => errorDiv.remove(), 5000);
        }
      }

      // Initialisation avec v√©rification des donn√©es (EXACTEMENT comme sur la page profil)
      document.addEventListener('DOMContentLoaded', () => {
        console.log('=== INITIALISATION ANNUAIRE - DOM CHARG√â ===');

        // Attendre que les donn√©es soient charg√©es (comme sur la page profil)
        const initDirectory = () => {
          console.log('V√©rification des donn√©es...');
          console.log('europeanRegions:', window.europeanRegions);
          console.log('europeanCities:', window.europeanCities);

          if (!window.europeanRegions || !window.europeanCities) {
            console.log('‚ùå Donn√©es pas encore charg√©es, attente 200ms...');
            setTimeout(initDirectory, 200);
            return;
          }

          console.log('‚úÖ Donn√©es g√©ographiques charg√©es avec succ√®s');
          console.log('Pays disponibles:', Object.keys(window.europeanRegions));
          console.log(
            'Villes disponibles pour France:',
            window.europeanCities.france?.length || 0
          );

          // V√©rifier que les s√©lecteurs existent
          const paysSelect = document.getElementById('filtrePays');
          const regionSelect = document.getElementById('filtreRegion');
          const villeSelect = document.getElementById('filtreVille');

          if (!paysSelect || !regionSelect || !villeSelect) {
            console.error('‚ùå ERREUR: S√©lecteurs non trouv√©s');
            return;
          }

          console.log('‚úÖ S√©lecteurs trouv√©s, initialisation DirectoryPage');
          window.directoryPage = new DirectoryPage();
        };

        // D√©marrer l'initialisation apr√®s un court d√©lai
        setTimeout(initDirectory, 100);
      });
    </script>

    <style>
      .pages-container {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding-top: 70px;
      }

      .filters-section {
        margin: 2rem 0;
      }

      .filters-card {
        background: white;
        border-radius: 15px;
        padding: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .filters-form {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        align-items: end;
      }

      .filter-group {
        display: flex;
        flex-direction: column;
      }

      .filter-group label {
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #2c3e50;
      }

      .filter-group input,
      .filter-group select {
        padding: 0.75rem;
        border: 2px solid #e1e8ed;
        border-radius: 8px;
        font-size: 1rem;
      }

      .filter-actions {
        display: flex;
        gap: 1rem;
        align-items: end;
      }

      .results-section {
        margin: 2rem 0;
      }

      .results-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        color: white;
      }

      .sort-options {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .sort-options select {
        padding: 0.5rem;
        border-radius: 4px;
        border: 1px solid #ddd;
      }

      .profiles-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
      }

      .profile-card {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s;
      }

      .profile-card:hover {
        transform: translateY(-5px);
      }

      .profile-image {
        position: relative;
        height: 200px;
        overflow: hidden;
      }

      .profile-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .premium-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #ffd700;
        color: #000;
        padding: 0.25rem 0.5rem;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .online-indicator {
        position: absolute;
        top: 10px;
        left: 10px;
        background: #4caf50;
        color: white;
        padding: 0.25rem 0.5rem;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .profile-info {
        padding: 1.5rem;
      }

      .profile-info h4 {
        margin: 0 0 0.5rem 0;
        color: #2c3e50;
        font-size: 1.2rem;
      }

      .profile-age,
      .profile-location,
      .profile-gender {
        margin: 0.25rem 0;
        color: #7f8c8d;
      }

      .profile-actions {
        margin-top: 1rem;
      }

      .no-results {
        grid-column: 1 / -1;
        text-align: center;
        padding: 3rem;
        color: white;
      }

      .no-results h4 {
        margin-bottom: 1rem;
        font-size: 1.5rem;
      }

      .pagination {
        display: flex;
        justify-content: center;
        margin-top: 2rem;
      }

      .pagination-controls {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }

      .pagination-btn {
        padding: 0.5rem 1rem;
        border: 1px solid #ddd;
        background: white;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .pagination-btn:hover {
        background: #f8f9fa;
      }

      .pagination-btn.active {
        background: #8a2be2;
        color: white;
        border-color: #8a2be2;
      }

      /* Styles pour les photos flout√©es et le syst√®me de d√©voilement */
      .blurred-photo-container {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      .blurred-photo {
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: blur(20px);
        transition: filter 0.3s ease;
      }

      .unblur-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .blurred-photo-container:hover .unblur-overlay {
        opacity: 1;
      }

      .unblur-btn {
        background: #8a2be2;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 25px;
        cursor: pointer;
        font-weight: 600;
        transition: background 0.3s ease;
      }

      .unblur-btn:hover {
        background: #7b1fa2;
      }

      .unblurred-photo {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      @media (max-width: 768px) {
        .filters-form {
          grid-template-columns: 1fr;
        }

        .filter-actions {
          flex-direction: column;
        }

        .profiles-grid {
          grid-template-columns: 1fr;
        }

        .results-header {
          flex-direction: column;
          gap: 1rem;
          align-items: flex-start;
        }

        .pagination-controls {
          flex-wrap: wrap;
          justify-content: center;
        }

        .unblur-overlay {
          opacity: 1; /* Toujours visible sur mobile */
        }
      }
    </style>
  </body>
</html>
